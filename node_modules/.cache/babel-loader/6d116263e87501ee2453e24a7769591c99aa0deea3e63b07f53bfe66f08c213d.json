{"ast":null,"code":"import _regeneratorRuntime from\"D:/E-Commerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"D:/E-Commerce/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"D:/E-Commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/E-Commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useDispatchCart,useCart}from'./ContextReducer';// import { Dropdown, DropdownButton } from 'react-bootstrap';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){var data=useCart();var navigate=useNavigate();var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var priceRef=useRef();var foodItem=props.item;var dispatch=useDispatchCart();var handleQty=function handleQty(e){setQty(e.target.value);};var handleAddToCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var food,_iterator,_step,item;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!localStorage.getItem(\"token\")){navigate(\"/login\");}food=[];_iterator=_createForOfIteratorHelper(data);_context.prev=3;_iterator.s();case 5:if((_step=_iterator.n()).done){_context.next=12;break;}item=_step.value;if(!(item.id===foodItem._id)){_context.next=10;break;}food=item;return _context.abrupt(\"break\",12);case 10:_context.next=5;break;case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](3);_iterator.e(_context.t0);case 17:_context.prev=17;_iterator.f();return _context.finish(17);case 20:console.log(food);console.log(new Date());_context.next=24;return dispatch({type:\"ADD\",id:foodItem._id,name:foodItem.name,img:props.ImgSrc,price:finalPrice,qty:qty,category:props.CategoryName,save:props.save,dealer:props.dealer});case 24:case\"end\":return _context.stop();}},_callee,null,[[3,14,17,20]]);}));return function handleAddToCart(){return _ref.apply(this,arguments);};}();var saving=parseInt(props.save/100*props.price);var finalPrice=qty*parseInt(props.price-saving);//This is where Price is changing\nvar product={id:props.id,name:props.foodName,price:props.price,img:props.ImgSrc,category:props.CategoryName,save:props.save,dealer:props.dealer,metal:props.metal,material:props.material,pricebreakup:props.pricebreakup};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",style:{width:\"17rem\",maxHeight:\"400px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:props.ImgSrc,className:\"card-img-top\",alt:\"...\",style:{maxHeight:\"180px\",objectFit:\"fill\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title text-secondary h6\",children:props.foodName}),/*#__PURE__*/_jsx(\"h5\",{className:\" d-inline text-secondary h-100 w-20 fs-6 ms-2 me-1\",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"\\u20B9\",finalPrice,\"/-\"]})}),/*#__PURE__*/_jsxs(\"s\",{className:\"text-secondary me-1\",children:[\"\\u20B9\",props.price*qty,\"/-\"]}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 w-30 bg-outline-secondary text-secondary rounded\",style:{select:\"#FF0000\"},onChange:handleQty,children:Array.from(Array(5),function(e,i){return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-secondary me-1\",children:[\"You Save: \",saving*qty]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-warning me-1\",children:[\"[\",props.save,\"% OFF]\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary m-1 rounded\",onClick:handleAddToCart,children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary m-1 rounded\",onClick:function onClick(){return navigate(\"/productdetails\",{state:product});},children:\"View Details\"})]})]})]})});}//","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","useDispatchCart","useCart","jsx","_jsx","jsxs","_jsxs","Card","props","data","navigate","_useState","_useState2","_slicedToArray","qty","setQty","priceRef","foodItem","item","dispatch","handleQty","e","target","value","handleAddToCart","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","food","_iterator","_step","wrap","_callee$","_context","prev","next","localStorage","getItem","_createForOfIteratorHelper","s","n","done","id","_id","abrupt","t0","f","finish","console","log","Date","type","name","img","ImgSrc","price","finalPrice","category","CategoryName","save","dealer","stop","apply","arguments","saving","parseInt","product","foodName","metal","material","pricebreakup","children","className","style","width","maxHeight","src","alt","objectFit","select","onChange","Array","from","i","onClick","state"],"sources":["D:/E-Commerce/src/components/Card.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useDispatchCart, useCart } from './ContextReducer'\r\n// import { Dropdown, DropdownButton } from 'react-bootstrap';\r\n\r\nexport default function Card(props) {\r\n  let data = useCart();\r\n\r\n  let navigate = useNavigate()\r\n  const [qty, setQty] = useState(1)\r\n  const priceRef = useRef();\r\n\r\n  let foodItem = props.item;\r\n  const dispatch = useDispatchCart();\r\n\r\n  const handleQty = (e) => {\r\n    setQty(e.target.value);\r\n  }\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!localStorage.getItem(\"token\")) {\r\n      navigate(\"/login\")\r\n    }\r\n    let food = []\r\n    for (const item of data) {\r\n      if (item.id === foodItem._id) {\r\n        food = item;\r\n\r\n        break;\r\n      }\r\n    }\r\n    console.log(food)\r\n    console.log(new Date())\r\n    await dispatch({ type: \"ADD\", id: foodItem._id, name: foodItem.name, img: props.ImgSrc, price: finalPrice, qty: qty, category: props.CategoryName, save: props.save, dealer: props.dealer })\r\n  }\r\n\r\n  const saving = parseInt((props.save / 100) * props.price);\r\n  const finalPrice = qty * parseInt(props.price - (saving));  //This is where Price is changing\r\n  const product = {\r\n    id: props.id, name: props.foodName, price: props.price, img: props.ImgSrc, category: props.CategoryName,\r\n    save: props.save, dealer: props.dealer, metal: props.metal, material: props.material, pricebreakup: props.pricebreakup\r\n  };\r\n\r\n  return (\r\n    <div>\r\n\r\n      <div className=\"card mt-3\" style={{ width: \"17rem\", maxHeight: \"400px\" }}>\r\n        <img src={props.ImgSrc} className=\"card-img-top\" alt=\"...\" style={{ maxHeight: \"180px\", objectFit: \"fill\" }} />\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title text-secondary h6\">{props.foodName}</h5>\r\n          <h5 className=' d-inline text-secondary h-100 w-20 fs-6 ms-2 me-1'><b>₹{finalPrice}/-</b></h5>\r\n          <s className='text-secondary me-1'>₹{props.price * qty}/-</s>\r\n          <select className=\"m-2 h-100 w-30 bg-outline-secondary text-secondary rounded\" style={{ select: \"#FF0000\" }} onChange={handleQty}>\r\n            {Array.from(Array(5), (e, i) => {\r\n              return (\r\n                <option key={i + 1} value={i + 1}>{i + 1}</option>)\r\n            })}\r\n          </select>\r\n          <br />\r\n          <small className='text-secondary me-1'>You Save: {saving * qty}</small><small className='text-warning me-1'>[{props.save}% OFF]</small>\r\n          <hr></hr>\r\n\r\n          <div className='btn-group'>\r\n          <button className={`btn btn-outline-secondary m-1 rounded`} onClick={handleAddToCart}>Add to Cart</button>\r\n            <button className={`btn btn-outline-secondary m-1 rounded`} onClick={() => navigate(\"/productdetails\", { state: product })}>View Details</button>\r\n\r\n          </div>\r\n\r\n          {/* <button className={`btn btn-danger justify-center ms-2 ${btnEnable ? \"\" : \"disabled\"}`} onClick={handleRemoveCart}>Remove</button> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n//"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}